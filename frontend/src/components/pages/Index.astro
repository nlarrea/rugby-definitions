---
import Layout from '@/layouts/Layout.astro';
import DefDisplay from '@/components/views/DefDisplay';
import TagsIcon from '@/components/icons/Tags.astro';
import Loader from '@/components/Loader.astro';
import { getI18N } from '@/i18n';
import type { DefinitionGroup } from '@/interfaces/definitions';

const { currentLocale } = Astro;
const i18n = getI18N({ currentLocale });

// Fetch data from API
const response = await fetch(
	`http://127.0.0.1:8000/definitions?lang=${currentLocale}`
);
const data: DefinitionGroup[] = await response.json();
---

<Layout
	title={`${i18n.SEO.TITLE_SEARCH}`}
	description={`${i18n.SEO.DESCRIPTION_SEARCH}`}
>
	<header id='page-title'>
		<h1>{i18n.SEARCH.TITLE}</h1>
		<p>{i18n.SEARCH.DESCRIPTION}</p>
	</header>

	<!-- @ts-ignore -->
	<DefDisplay lang={currentLocale} i18n={i18n} client:only>
		<TagsIcon slot='tags' />
		<Loader slot='loader' />
	</DefDisplay>
</Layout>

<style>
	header#page-title {
		padding: 2em 0;

		h1,
		p {
			text-align: center;
		}
	}
</style>
